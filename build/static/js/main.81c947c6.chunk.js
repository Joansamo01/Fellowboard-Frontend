(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{170:function(e,t,a){e.exports=a.p+"static/media/pin-outline.7c3df105.svg"},171:function(e,t,a){e.exports=a.p+"static/media/pin-filled.8ce1b2c1.svg"},172:function(e,t,a){e.exports=a.p+"static/media/search.8d146a4a.svg"},173:function(e,t,a){e.exports=a.p+"static/media/save.2f36ebaa.svg"},174:function(e,t,a){e.exports=a.p+"static/media/edit.b5e1292a.svg"},175:function(e,t,a){e.exports=a.p+"static/media/cancel.2040f220.svg"},209:function(e,t,a){e.exports=a(347)},215:function(e,t,a){},346:function(e,t,a){},347:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(39),s=a.n(c),o=a(21),l=a(87),i=a(22),u=a(26),m=a.n(u),d=a(32),p=["0F2E4C","39B995","F7B929","1C529E","263546","FED330","DB3A34","14B5B0"],b={default:3,1100:2,750:1},f=function(e){for(var t=0,a=0;a<e.length;a++)t+=e.charCodeAt(a)+a;return"#"+p[t=((t%=p.length)+p.length)%p.length]},g=a(170),h=a.n(g),v=a(171),E=a.n(v);var O=function(e){var t,a=Object(n.useContext)(V),c=a.state,s=a.dispatch,l=Object(n.useState)(!1),i=Object(o.a)(l,2),u=i[0],p=i[1],b=e.pinnedPosts.has(e._id),g=function(){var t=Object(d.a)(m.a.mark((function t(){var a,n,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=b?c.dbUser.pinnedPosts.filter((function(t){return t!==e._id})):c.dbUser.pinnedPosts.concat(e._id),n={pinnedPosts:a},t.next=4,fetch("/api/users/".concat(c.dbUser.username,"/pins"),{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(n)});case 4:return r=t.sent,t.next=7,r.json();case 7:t.sent,s({type:"UPDATE_PINS",payload:a});case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();switch(e.type.toLowerCase()){case"discord":case"text":t=r.a.createElement("div",{className:"post-body_content text"},"url"in e.content&&r.a.createElement(r.a.Fragment,null,"\ud83d\udd17",r.a.createElement("a",{href:e.content.url,target:"_blank"},"Resource")),r.a.createElement("p",null,e.content.description));break;case"youtube":t=r.a.createElement("div",{className:"post-body_content youtube"},r.a.createElement("a",{href:"https://www.youtube.com/watch?v=".concat(e.content.id),target:"_blank"},"\ud83d\udd17 Video link"),r.a.createElement("img",{className:"post-body_thumbnail",src:e.content.thumbnails.url}))}var v,O=e.tags.map((function(e,t){return r.a.createElement("span",{key:t,className:"tag",style:{backgroundColor:f(e)}},"#".concat(e))})),y=function(e){var t=e;e instanceof Date||(t=new Date(e));var a=new Date,n=t.getTime()-a.getTime();return Math.floor(Math.abs(n)/864e5)}(e.timestamp);return v=0===y?"today":1===y?"yesterday":y+" days ago",r.a.createElement("div",{className:"post",onMouseOver:function(){return p(!0)},onMouseLeave:function(){return p(!1)}},(u||b)&&r.a.createElement("img",{onClick:g,className:"post-pin",src:b?E.a:h.a}),r.a.createElement("section",{className:"post-body"},r.a.createElement("div",{className:"post-body_header"},r.a.createElement("h3",{className:"title"},e.title),r.a.createElement("label",{className:"creator"},"Shared by ",e.creator),r.a.createElement("label",{className:"time"},"Posted ",v)),t),r.a.createElement("section",{className:"post-tags"},O))},y=a(172),j=a.n(y);var N=function(e){var t=Object(n.useState)(""),a=Object(o.a)(t,2),c=a[0],s=a[1],l=Object(n.useState)([]),i=Object(o.a)(l,2),u=i[0],m=(i[1],u.map((function(e,t){var a=e.substring(1);return r.a.createElement("span",{key:t,className:"tag",style:{backgroundColor:f(a)}},e)})));return r.a.createElement("div",{className:"search"},m,r.a.createElement("input",{value:c,placeholder:"Search by title or by tags by prepending #...",onChange:function(e){s(e.target.value)},onKeyUp:function(){return e.setFilter(c)}}),r.a.createElement("img",{src:j.a,className:"search-btn",onClick:function(){return e.setFilter(c)}}))},k=a(173),S=a.n(k),C=a(174),w=a.n(C),x=a(175),_=a.n(x);var P=function(e){var t=Object(n.useState)(e.discord||""),a=Object(o.a)(t,2),c=a[0],s=a[1],l=Object(n.useState)(!1),i=Object(o.a)(l,2),u=i[0],m=i[1],d=r.a.createElement("span",{className:"profile-discord"},u?r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{value:c,onChange:function(e){return s(e.target.value)},placeholder:"Set discord username",className:"profile-discord_input"}),r.a.createElement("img",{src:S.a,onClick:function(){alert("saved discord username"),m(!1)}}),r.a.createElement("img",{src:_.a,onClick:function(){return m(!1)}})):r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{value:c,className:"profile-discord_input"},e.discord||"Set discord username"),r.a.createElement("img",{src:w.a,onClick:function(){return m(!0)}})));return r.a.createElement("div",{className:"profile"},r.a.createElement("div",{className:"profile-avatar"}),r.a.createElement("section",null,r.a.createElement("h2",{className:"profile-name"},e.fullname||e.username),d))},I=(a(215),a(176)),L=a.n(I),U=a(93),T=a(19),D=a(360),A=a(63),F=a(358),M=a(122);function J(e){var t=Object(n.useState)(""),a=Object(o.a)(t,2),c=a[0],s=a[1],l=e.tags.map((function(t,a){return r.a.createElement("span",{key:a,className:"tag",style:{backgroundColor:f(t)},onClick:function(){return function(t){var a=Object(U.a)(e.tags);a.splice(t,1),e.setTags(a)}(a)}},"#".concat(t))}));return r.a.createElement("div",{className:"tag-form"},r.a.createElement("div",{className:"tag-form_container"},l),r.a.createElement(F.a.Input,{label:"Tags",placeholder:"Add a comma to confirm the tag",value:c,onChange:function(t,a){var n=a.value;if(n&&","===n.charAt(n.length-1)){var r=n.substring(0,n.length-1).trim();e.setTags(e.tags.concat(r)),s("")}else s(n)}}))}var G=function(){var e,t=Object(n.useContext)(V),a=t.state,c=t.dispatch,s=Object(n.useState)(!1),l=Object(o.a)(s,2),i=l[0],u=l[1],p=Object(n.useState)(""),b=Object(o.a)(p,2),f=b[0],g=b[1],h=Object(n.useState)({}),v=Object(o.a)(h,2),E=v[0],O=v[1],y=Object(n.useState)(!0),j=Object(o.a)(y,2),N=j[0],k=j[1],S=Object(n.useState)([]),C=Object(o.a)(S,2),w=C[0],x=C[1],_=Object(n.useState)(!1),P=Object(o.a)(_,2),I=P[0],L=P[1],U=Object(n.useState)(!1),G=Object(o.a)(U,2),R=G[0],B=G[1],q=function(){u(!1),g(""),O({}),x([]),k(!1),L(!1),B(!1)},W=function(){var e=Object(d.a)(m.a.mark((function e(){var t,a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=Object(T.a)({},E)).isPublic=N,"tags"in t&&(t.tags=t.tags.concat(w)),e.next=5,fetch("/api/posts",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(t)});case 5:return a=e.sent,e.next=8,a.json();case 8:n=e.sent,c({type:"ADD_POST",payload:{post:n}}),q();case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(d.a)(m.a.mark((function e(t){var n,r,s,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),e.t0=f,e.next="text"===e.t0?4:"youtube"===e.t0||"github"===e.t0?14:26;break;case 4:return n={type:f,tags:w,isPublic:N,title:E.title,content:{description:E.description||"",url:E.url||""},creator:a.dbUser.username},e.next=7,fetch("/api/posts",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(n)});case 7:return r=e.sent,e.next=10,r.json();case 10:return s=e.sent,c({type:"ADD_POST",payload:{post:s}}),q(),e.abrupt("break",27);case 14:return L(!0),n={url:E.url,creator:a.dbUser.username},e.next=18,fetch("/api/posts",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(n)});case 18:return r=e.sent,e.next=21,r.json();case 21:return o=e.sent,O(o),L(!1),B(!0),e.abrupt("break",27);case 26:return e.abrupt("break",27);case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(""===f)e=r.a.createElement("div",{className:"add-options"},r.a.createElement(D.a,{icon:!0,labelPosition:"left",className:"add-options_choice",onClick:function(){return g("text")}},r.a.createElement(A.a,{name:"sticky note"}),"Notes"),r.a.createElement(D.a,{icon:!0,labelPosition:"left",className:"add-options_choice",onClick:function(){return g("youtube")}},r.a.createElement(A.a,{name:"youtube"}),"Youtube"),r.a.createElement(D.a,{icon:!0,labelPosition:"left",className:"add-options_choice",onClick:function(){return g("github")}},r.a.createElement(A.a,{name:"github alternate"}),"Github"));else if("text"===f)e=r.a.createElement(F.a,{className:"add-text",onSubmit:z},r.a.createElement("h3",null,r.a.createElement(A.a,{name:"sticky note"}),"Post new note"),r.a.createElement(F.a.Input,{fluid:!0,required:!0,label:"Title",placeholder:"e.g. Intro to MERN stack",value:E.title,onChange:function(e,t){var a=t.value;return O(Object(T.a)(Object(T.a)({},E),{},{title:a}))}}),r.a.createElement(F.a.Input,{icon:"linkify",iconPosition:"left",value:E.url,onChange:function(e,t){var a=t.value;return O(Object(T.a)(Object(T.a)({},E),{},{url:a}))}}),r.a.createElement(F.a.TextArea,{label:"Description",placeholder:"e.g. Learn to build and deploy your first MERN project",value:E.description,onChange:function(e,t){var a=t.value;return O(Object(T.a)(Object(T.a)({},E),{},{description:a}))}}),r.a.createElement(J,{tags:w,setTags:x}),r.a.createElement(F.a.Group,{widths:"equal"},r.a.createElement(F.a.Radio,{label:"Public",checked:N,onChange:function(e,t){var a=t.checked;return k(a)}}),r.a.createElement(F.a.Radio,{label:"Private",checked:!N,onChange:function(e,t){var a=t.checked;return k(!a)}})),r.a.createElement("button",{className:"add-form-submit"},"Create"));else if(R){var Y,K=E.content;"youtube"===f?Y=r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,E.title),r.a.createElement("img",{src:K.thumbnails.url})):"github"===f&&(Y=r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,E.title),r.a.createElement("label",null,K.creator),r.a.createElement("label",null,K.state),r.a.createElement("p",null,K.body),r.a.createElement(M.b,null,r.a.createElement(M.a,null,K.allAssignees.map((function(e,t){return r.a.createElement("img",{alt:"assignee",src:e.avatar_url})})))))),e=r.a.createElement("div",{className:"add-text"},Y,r.a.createElement("button",{className:"add-form_submit",onClick:q},"Cancel"),r.a.createElement("button",{className:"add-form_submit",onClick:W},"Confirm"))}else if("youtube"===f||"github"===f){var $="youtube"===f?"Post a Youtube Video":"Post from Github";e=r.a.createElement(F.a,{className:"add-text",onSubmit:z},r.a.createElement("h3",null,r.a.createElement(A.a,{name:f}),$),I?r.a.createElement("div",{className:"loader"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(F.a.Input,{fluid:!0,required:!0,icon:"linkify",iconPosition:"left",onChange:function(e,t){var a=t.value;return O(Object(T.a)(Object(T.a)({},E),{},{url:a}))},value:E.url||""}),r.a.createElement(J,{tags:w,setTags:x}),r.a.createElement(F.a.Group,{widths:"equal"},r.a.createElement(F.a.Radio,{label:"Public",checked:N,onChange:function(e,t){var a=t.checked;return k(a)}}),r.a.createElement(F.a.Radio,{label:"Private",checked:!N,onChange:function(e,t){var a=t.checked;return k(!a)}})),r.a.createElement("button",{className:"add-form-submit"},"Create")))}return r.a.createElement("div",null,r.a.createElement(D.a,{circular:!0,icon:"plus",size:"big",className:"add-btn ".concat(i?"opened":"closed"),onClick:function(){u(!i),g("")}}),i&&r.a.createElement("div",{className:"add-form ".concat(i?"opened":"closed"," ").concat(f)},e))},R=function(){var e=Object(d.a)(m.a.mark((function e(t,a){var n,r,c,s,o,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=11;break}return n=t.avatar_url,r=t.login,c=t.id,s="?ghUsername=".concat(r,"&githubId=").concat(c,"&avatarUrl=").concat(n),e.next=6,fetch("".concat(a,"/user-posts").concat(s));case 6:return o=e.sent,e.next=9,o.json();case 9:return l=e.sent,e.abrupt("return",l);case 11:return e.abrupt("return",[]);case 14:return e.prev=14,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",[]);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,a){return e.apply(this,arguments)}}(),B={isLoggedIn:JSON.parse(localStorage.getItem("isLoggedIn"))||!1,user:JSON.parse(localStorage.getItem("user"))||null,client_id:"57cc7255392bb873af7c",redirect_uri:"https://fellowboard.herokuapp.com/login",client_secret:"33bf80ee246f154d2aba9211398a35e0e2e27c95",proxy_url:"https://fellowboard.herokuapp.com/authenticate",dbUser:{},posts:[]},q=function(e,t){switch(t.type){case"LOGIN":return localStorage.setItem("isLoggedIn",JSON.stringify(t.payload.isLoggedIn)),localStorage.setItem("user",JSON.stringify(t.payload.user)),Object(T.a)(Object(T.a)({},e),{},{isLoggedIn:t.payload.isLoggedIn,user:t.payload.user});case"LOGOUT":return localStorage.clear(),Object(T.a)(Object(T.a)({},e),{},{isLoggedIn:!1,user:null});case"POSTS":var a=t.payload,n=a.posts,r=a.dbUser;return Object(T.a)(Object(T.a)({},e),{},{posts:n,dbUser:r instanceof Array?r[0]:r});case"ADD_POST":var c=Object(U.a)(e.posts);return c.unshift(t.payload.post),Object(T.a)(Object(T.a)({},e),{},{posts:c});case"UPDATE_PINS":return Object(T.a)(Object(T.a)({},e),{},{dbUser:Object(T.a)(Object(T.a)({},e.dbUser),{},{pinnedPosts:t.payload})});default:return e}};function W(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],c=t[1],s=Object(n.useContext)(V),l=s.state,u=s.dispatch,p=Object(n.useMemo)((function(){return new Set(l.dbUser.pinnedPosts)}),[l.dbUser.pinnedPosts]);if(Object(n.useEffect)((function(){function e(){return(e=Object(d.a)(m.a.mark((function e(){var t,a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R(l.user,l.proxy_url);case 2:t=e.sent,a=t.dbUser,n=t.posts,u({type:"POSTS",payload:{posts:n,dbUser:a}});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),!l.isLoggedIn)return r.a.createElement(i.a,{to:"/login"});var f=l.posts,g=l.dbUser,h=g.githubId,v=g.username,E=g.avatarUrl,y=g.fullname,j=f.filter((function(e){return a.startsWith("#")?e.tags.find((function(e){return("#"+e).startsWith(a)})):e.title.toLowerCase().includes(a.toLowerCase())})).map((function(e,t){return r.a.createElement(O,Object.assign({key:t},e,{pinnedPosts:p,user:g}))}));return r.a.createElement("div",{className:"home-container"},r.a.createElement("div",{className:"header-container"},r.a.createElement("button",{className:"logout-btn",onClick:function(){u({type:"LOGOUT"})}},"Logout"),r.a.createElement("div",{className:"header"},r.a.createElement(P,{githubId:h,username:v,avatarUrl:E,fullname:y}),r.a.createElement(N,{setFilter:c}))),r.a.createElement("div",{className:"masonry-container"},r.a.createElement(L.a,{className:"my-masonry-grid posts",columnClassName:"my-masonry-grid_column",breakpointCols:b},j)),r.a.createElement(G,null))}a(346);function z(){var e=Object(n.useContext)(V),t=e.state,a=e.dispatch,c=Object(n.useState)({errorMessage:"",isLoading:!1}),s=Object(o.a)(c,2),l=s[0],u=s[1],p=t.client_id,b=t.redirect_uri;return Object(n.useEffect)((function(){var e=window.location.href;if(e.includes("?code=")){var n=e.split("?code=");window.history.pushState({},null,n[0]),u(Object(T.a)(Object(T.a)({},l),{},{isLoading:!0}));var r={client_id:t.client_id,redirect_uri:t.redirect_uri,client_secret:t.client_secret,code:n[1]},c=t.proxy_url;fetch(c,{method:"POST",body:JSON.stringify(r)}).then((function(e){return e.json()})).then(function(){var e=Object(d.a)(m.a.mark((function e(t){var n,r,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:"LOGIN",payload:{user:t,isLoggedIn:!0}}),e.prev=1,e.next=4,R(t,c);case 4:n=e.sent,r=n.dbUser,s=n.posts,a({type:"POSTS",payload:{posts:s,dbUser:r}}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){u({isLoading:!1,errorMessage:"Sorry! Login failed"})}))}}),[t,a,l]),t.isLoggedIn?r.a.createElement(i.a,{to:"/"}):r.a.createElement("div",{className:"login"},r.a.createElement("div",{className:"login-container"},l.isLoading?r.a.createElement("div",{className:"loader"}):r.a.createElement("div",{className:"login-btn-container"},r.a.createElement("a",{className:"login-btn",href:"https://github.com/login/oauth/authorize?scope=user&client_id=".concat(p,"&redirect_uri=").concat(b),onClick:function(){u(Object(T.a)(Object(T.a)({},l),{},{errorMessage:""}))}},"Login with Github"),r.a.createElement("span",{className:"login-btn-error"},l.errorMessage))),r.a.createElement("div",{className:"login-header"},r.a.createElement("h1",{className:"login-header_name"},"fellowboard"),r.a.createElement("p",{className:"login-header_tagline"},"Navigate resources curated by fellows for fellows")))}var V=Object(n.createContext)();var Y=function(){var e=Object(n.useReducer)(q,B),t=Object(o.a)(e,2),a=t[0],c=t[1];return r.a.createElement(V.Provider,{value:{state:a,dispatch:c}},r.a.createElement(l.a,null,r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"/login",component:z}),r.a.createElement(i.b,{path:"/",component:W}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[209,1,2]]]);
//# sourceMappingURL=main.81c947c6.chunk.js.map