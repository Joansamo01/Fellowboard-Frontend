(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{171:function(e,t,a){e.exports=a.p+"static/media/pin-outline.7c3df105.svg"},172:function(e,t,a){e.exports=a.p+"static/media/pin-filled.8ce1b2c1.svg"},177:function(e,t,a){e.exports=a.p+"static/media/search.8d146a4a.svg"},178:function(e,t,a){e.exports=a.p+"static/media/save.2f36ebaa.svg"},179:function(e,t,a){e.exports=a.p+"static/media/edit.b5e1292a.svg"},180:function(e,t,a){e.exports=a.p+"static/media/cancel.2040f220.svg"},210:function(e,t,a){e.exports=a(348)},294:function(e,t,a){},347:function(e,t,a){},348:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(39),o=a.n(c),s=a(21),l=a(87),i=a(23),u=a(22),m=a.n(u),d=a(28),p=["0F2E4C","39B995","F7B929","1C529E","263546","FED330","DB3A34","14B5B0"],b={default:3,1100:2,750:1},f=function(e){for(var t=0,a=0;a<e.length;a++)t+=e.charCodeAt(a)+a;return"#"+p[t=((t%=p.length)+p.length)%p.length]},g=a(171),h=a.n(g),v=a(172),E=a.n(v),O=a(63);var y=function(e){var t,a=Object(n.useContext)(K),c=a.state,o=a.dispatch,l=Object(n.useState)(!1),i=Object(s.a)(l,2),u=i[0],p=i[1],b=e.pinnedPosts.has(e._id),g=function(){var t=Object(d.a)(m.a.mark((function t(){var a,n,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=b?c.dbUser.pinnedPosts.filter((function(t){return t!==e._id})):c.dbUser.pinnedPosts.concat(e._id),n={pinnedPosts:a},t.next=4,fetch("/api/users/".concat(c.dbUser.username,"/pins"),{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(n)});case 4:return r=t.sent,t.next=7,r.json();case 7:t.sent,o({type:"UPDATE_PINS",payload:a});case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),v=e.type;switch(v.toLowerCase()){case"discord":case"text":var O;"discord"===v&&(O=r.a.createElement("img",{src:e.content.thumbnail.url,className:"post-body_thumbnail"})),t=r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"post-body_content text"},"url"in e.content&&r.a.createElement(r.a.Fragment,null,"\ud83d\udd17",r.a.createElement("a",{href:e.content.url,target:"_blank"},"Resource")),r.a.createElement("p",null,e.content.description)),O);break;case"youtube":t=r.a.createElement("div",{className:"post-body_content youtube"},r.a.createElement("a",{href:"https://www.youtube.com/watch?v=".concat(e.content.id),target:"_blank"},"\ud83d\udd17 Video link"),r.a.createElement("img",{className:"post-body_thumbnail",src:e.content.thumbnails.url}));break;case"contacts":t=r.a.createElement("div",{className:"post-body_content contacts"},r.a.createElement("img",{className:"post-body_content-avatar",src:e.content.avatar,alt:"Avatar"}),r.a.createElement("div",{className:"post-body_content-bio"},r.a.createElement(j,{icon:"user",text:"".concat(e.content.username," | ").concat(e.content.pod)}),r.a.createElement(j,{icon:"mail",text:e.content.mail}),r.a.createElement(j,{icon:"location arrow",text:e.content.location}),r.a.createElement("span",null,e.content.bio),r.a.createElement("a",{href:e.content.github_url},"\ud83d\udd17 Github Profile")))}var y,N=e.tags.map((function(e,t){return r.a.createElement("span",{key:t,className:"tag",style:{backgroundColor:f(e)}},"#".concat(e))})),k=function(e){var t=e;e instanceof Date||(t=new Date(e));var a=new Date,n=t.getTime()-a.getTime();return Math.floor(Math.abs(n)/864e5)}(e.timestamp);return y=0===k?"today":1===k?"yesterday":k+" days ago",r.a.createElement("div",{className:"post",onMouseOver:function(){return p(!0)},onMouseLeave:function(){return p(!1)}},(u||b)&&r.a.createElement("img",{onClick:g,className:"post-pin",src:b?E.a:h.a}),r.a.createElement("section",{className:"post-body"},r.a.createElement("div",{className:"post-body_header"},r.a.createElement("h3",{className:"title"},e.title),"contacts"!==e.type&&r.a.createElement("label",{className:"creator"},"Shared by ","server"===e.creator?"Team GARY":e.creator),r.a.createElement("label",{className:"time"},"Posted ",y)),t),r.a.createElement("section",{className:"post-tags"},N))};function j(e){var t=e.icon,a=e.text;return a?r.a.createElement("div",{className:"contact-info ".concat("user"===t?"name":"")},r.a.createElement(O.a,{name:t}),a):r.a.createElement(r.a.Fragment,null)}var N=a(177),k=a.n(N);var S=function(e){var t=Object(n.useRef)(null),a=Object(n.useState)(""),c=Object(s.a)(a,2),o=c[0],l=c[1],i=function(){var e=window.pageYOffset;e<300?t.current.className="search":e>=100&&(t.current.className="search fixed")};return Object(n.useEffect)((function(){return window.addEventListener("scroll",i,{passive:!0}),function(){window.removeEventListener("scroll",i)}}),[]),r.a.createElement("div",{ref:t,className:"search"},r.a.createElement("input",{value:o,placeholder:"Search by title or by tags by prepending #...",onChange:function(e){l(e.target.value)},onKeyUp:function(){return e.setFilter(o)}}),r.a.createElement("img",{src:k.a,className:"search-btn",onClick:function(){return e.setFilter(o)}}))},w=a(178),x=a.n(w),C=a(179),_=a.n(C),P=a(180),U=a.n(P);var I=function(e){var t=Object(n.useContext)(K),a=t.state,c=t.dispatch,o=Object(n.useState)(e.discord||""),l=Object(s.a)(o,2),i=l[0],u=l[1],p=Object(n.useState)(!1),b=Object(s.a)(p,2),f=b[0],g=b[1],h=function(){var e=Object(d.a)(m.a.mark((function e(t){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={discord:t},e.next=4,fetch("/api/users/".concat(a.dbUser.username),{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(n)});case 4:return r=e.sent,e.next=7,r.json();case 7:e.sent,200===r.status&&(g(!1),u(t),c({type:"UPDATE_DISCORD",payload:{discord:t}})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),v=r.a.createElement("span",{className:"profile-discord"},f?r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{value:i,onChange:function(e){return u(e.target.value)},placeholder:"Set discord username",className:"profile-discord_input"}),r.a.createElement("img",{src:x.a,onClick:Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h(i));case 1:case"end":return e.stop()}}),e)})))}),r.a.createElement("img",{src:U.a,onClick:function(){return g(!1)}})):r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{value:i,className:"profile-discord_input"},e.discord||"Set discord username"),r.a.createElement("img",{src:_.a,onClick:function(){return g(!0)}})));return r.a.createElement("div",{className:"profile"},r.a.createElement("div",{className:"profile-avatar"},r.a.createElement("img",{className:"profile-avatar-img",src:e.avatarUrl,alt:""})),r.a.createElement("section",null,r.a.createElement("h2",{className:"profile-name"},e.fullname||e.username),v))},T=(a(294),a(181)),L=a.n(T),D=a(93),A=a(19),F=a(360),J=a(358),M=a(122);function R(e){var t=Object(n.useState)(""),a=Object(s.a)(t,2),c=a[0],o=a[1],l=e.tags.map((function(t,a){return r.a.createElement("span",{key:a,className:"tag",style:{backgroundColor:f(t)},onClick:function(){return function(t){var a=Object(D.a)(e.tags);a.splice(t,1),e.setTags(a)}(a)}},"#".concat(t))}));return r.a.createElement("div",{className:"tag-form"},r.a.createElement("div",{className:"tag-form_container"},l),r.a.createElement(J.a.Input,{label:"Tags",placeholder:"Add a comma to confirm the tag",value:c,onChange:function(t,a){var n=a.value;if(n&&","===n.charAt(n.length-1)){var r=n.substring(0,n.length-1).trim();e.setTags(e.tags.concat(r)),o("")}else o(n)}}))}var G=function(){var e,t=Object(n.useContext)(K),a=t.state,c=t.dispatch,o=Object(n.useState)(!1),l=Object(s.a)(o,2),i=l[0],u=l[1],p=Object(n.useState)(""),b=Object(s.a)(p,2),f=b[0],g=b[1],h=Object(n.useState)({}),v=Object(s.a)(h,2),E=v[0],y=v[1],j=Object(n.useState)(!0),N=Object(s.a)(j,2),k=N[0],S=N[1],w=Object(n.useState)([]),x=Object(s.a)(w,2),C=x[0],_=x[1],P=Object(n.useState)(!1),U=Object(s.a)(P,2),I=U[0],T=U[1],L=Object(n.useState)(!1),D=Object(s.a)(L,2),G=D[0],B=D[1],q=function(){u(!1),g(""),y({}),_([]),S(!1),T(!1),B(!1)},W=function(){var e=Object(d.a)(m.a.mark((function e(){var t,a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=Object(A.a)({},E)).isPublic=k,"tags"in t&&(t.tags=t.tags.concat(C)),e.next=5,fetch("/api/posts",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(t)});case 5:return a=e.sent,e.next=8,a.json();case 8:n=e.sent,c({type:"ADD_POST",payload:{post:n}}),q();case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=Object(d.a)(m.a.mark((function e(t){var n,r,o,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),e.t0=f,e.next="text"===e.t0?4:"youtube"===e.t0||"github"===e.t0?14:26;break;case 4:return n={type:f,tags:C,isPublic:k,title:E.title,content:{description:E.description||"",url:E.url||""},creator:a.dbUser.username},e.next=7,fetch("/api/posts",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(n)});case 7:return r=e.sent,e.next=10,r.json();case 10:return o=e.sent,c({type:"ADD_POST",payload:{post:o}}),q(),e.abrupt("break",27);case 14:return T(!0),n={url:E.url,creator:a.dbUser.username},e.next=18,fetch("/api/posts",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(n)});case 18:return r=e.sent,e.next=21,r.json();case 21:return s=e.sent,y(s),T(!1),B(!0),e.abrupt("break",27);case 26:return e.abrupt("break",27);case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(""===f)e=r.a.createElement("div",{className:"add-options"},r.a.createElement(F.a,{icon:!0,labelPosition:"left",className:"add-options_choice",onClick:function(){return g("text")}},r.a.createElement(O.a,{name:"sticky note"}),"Notes"),r.a.createElement(F.a,{icon:!0,labelPosition:"left",className:"add-options_choice",onClick:function(){return g("youtube")}},r.a.createElement(O.a,{name:"youtube"}),"Youtube"),r.a.createElement(F.a,{icon:!0,labelPosition:"left",className:"add-options_choice",onClick:function(){return g("github")}},r.a.createElement(O.a,{name:"github alternate"}),"Github"));else if("text"===f)e=r.a.createElement(J.a,{className:"add-text",onSubmit:Y},r.a.createElement("h3",null,r.a.createElement(O.a,{name:"sticky note"}),"Post new note"),r.a.createElement(J.a.Input,{fluid:!0,required:!0,label:"Title",placeholder:"e.g. Intro to MERN stack",value:E.title,onChange:function(e,t){var a=t.value;return y(Object(A.a)(Object(A.a)({},E),{},{title:a}))}}),r.a.createElement(J.a.Input,{icon:"linkify",iconPosition:"left",value:E.url,onChange:function(e,t){var a=t.value;return y(Object(A.a)(Object(A.a)({},E),{},{url:a}))}}),r.a.createElement(J.a.TextArea,{label:"Description",placeholder:"e.g. Learn to build and deploy your first MERN project",value:E.description,onChange:function(e,t){var a=t.value;return y(Object(A.a)(Object(A.a)({},E),{},{description:a}))}}),r.a.createElement(R,{tags:C,setTags:_}),r.a.createElement(J.a.Group,{widths:"equal"},r.a.createElement(J.a.Radio,{label:"Public",checked:k,onChange:function(e,t){var a=t.checked;return S(a)}}),r.a.createElement(J.a.Radio,{label:"Private",checked:!k,onChange:function(e,t){var a=t.checked;return S(!a)}})),r.a.createElement("button",{className:"add-form-submit"},"Create"));else if(G){var z,V=E.content;"youtube"===f?z=r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,E.title),r.a.createElement("img",{src:V.thumbnails.url})):"github"===f&&(z=r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,E.title),r.a.createElement("label",null,V.creator),r.a.createElement("label",null,V.state),r.a.createElement("p",null,V.body),r.a.createElement(M.b,null,r.a.createElement(M.a,null,V.allAssignees.map((function(e,t){return r.a.createElement("img",{alt:"assignee",src:e.avatar_url})})))))),e=r.a.createElement("div",{className:"add-text"},z,r.a.createElement("button",{className:"add-form_submit",onClick:q},"Cancel"),r.a.createElement("button",{className:"add-form_submit",onClick:W},"Confirm"))}else if("youtube"===f||"github"===f){var $="youtube"===f?"Post a Youtube Video":"Post from Github";e=r.a.createElement(J.a,{className:"add-text",onSubmit:Y},r.a.createElement("h3",null,r.a.createElement(O.a,{name:f}),$),I?r.a.createElement("div",{className:"loader"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(J.a.Input,{fluid:!0,required:!0,icon:"linkify",iconPosition:"left",onChange:function(e,t){var a=t.value;return y(Object(A.a)(Object(A.a)({},E),{},{url:a}))},value:E.url||""}),r.a.createElement(R,{tags:C,setTags:_}),r.a.createElement(J.a.Group,{widths:"equal"},r.a.createElement(J.a.Radio,{label:"Public",checked:k,onChange:function(e,t){var a=t.checked;return S(a)}}),r.a.createElement(J.a.Radio,{label:"Private",checked:!k,onChange:function(e,t){var a=t.checked;return S(!a)}})),r.a.createElement("button",{className:"add-form-submit"},"Create")))}return r.a.createElement("div",null,r.a.createElement(F.a,{circular:!0,icon:"plus",size:"big",className:"add-btn ".concat(i?"opened":"closed"),onClick:function(){u(!i),g("")}}),i&&r.a.createElement("div",{className:"add-form ".concat(i?"opened":"closed"," ").concat(f)},e))},B=function(){var e=Object(d.a)(m.a.mark((function e(t,a){var n,r,c,o,s,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=11;break}return n=t.avatar_url,r=t.login,c=t.id,o="?ghUsername=".concat(r,"&githubId=").concat(c,"&avatarUrl=").concat(n),e.next=6,fetch("".concat(a,"/user-posts").concat(o));case 6:return s=e.sent,e.next=9,s.json();case 9:return l=e.sent,e.abrupt("return",l);case 11:return e.abrupt("return",[]);case 14:return e.prev=14,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",[]);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,a){return e.apply(this,arguments)}}(),q={isLoggedIn:JSON.parse(localStorage.getItem("isLoggedIn"))||!1,user:JSON.parse(localStorage.getItem("user"))||null,client_id:"Iv1.065a3c7d55323e79",redirect_uri:"http://fellowboard.herokuapp.com/login",client_secret:"059ba10091d97810b4b7ae9d4ac1747be5944e10",proxy_url:"http://fellowboard.herokuapp.com/authenticate",dbUser:{},posts:[]},W=function(e,t){switch(t.type){case"LOGIN":return localStorage.setItem("isLoggedIn",JSON.stringify(t.payload.isLoggedIn)),localStorage.setItem("user",JSON.stringify(t.payload.user)),Object(A.a)(Object(A.a)({},e),{},{isLoggedIn:t.payload.isLoggedIn,user:t.payload.user});case"LOGOUT":return localStorage.clear(),Object(A.a)(Object(A.a)({},e),{},{isLoggedIn:!1,user:null});case"POSTS":var a=t.payload,n=a.posts,r=a.dbUser;return Object(A.a)(Object(A.a)({},e),{},{posts:n,dbUser:r instanceof Array?r[0]:r});case"ADD_POST":var c=Object(D.a)(e.posts);return c.unshift(t.payload.post),Object(A.a)(Object(A.a)({},e),{},{posts:c});case"UPDATE_PINS":return Object(A.a)(Object(A.a)({},e),{},{dbUser:Object(A.a)(Object(A.a)({},e.dbUser),{},{pinnedPosts:t.payload})});case"UPDATE_DISCORD":var o=e.dbUser;return o.discord=t.payload.discord,Object(A.a)(Object(A.a)({},e),{},{dbUser:o});default:return e}};var Y=function(e){return r.a.createElement("div",null,r.a.createElement(F.a,{circular:!0,icon:r.a.createElement(O.a,{inverted:!0,name:"arrow up"}),size:"big",color:"black",className:"scroll-button",onClick:function(){document.body.scrollTop=0,document.documentElement.scrollTop=0}}))};function z(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],c=t[1],o=Object(n.useContext)(K),l=o.state,u=o.dispatch,p=Object(n.useMemo)((function(){return new Set(l.dbUser.pinnedPosts)}),[l.dbUser.pinnedPosts]);if(Object(n.useEffect)((function(){function e(){return(e=Object(d.a)(m.a.mark((function e(){var t,a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(l.user,l.proxy_url);case 2:t=e.sent,a=t.dbUser,n=t.posts,u({type:"POSTS",payload:{posts:n,dbUser:a}});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),!l.isLoggedIn)return r.a.createElement(i.a,{to:"/login"});var f=l.posts,g=l.dbUser,h=g.githubId,v=g.username,E=g.avatarUrl,O=g.fullname,j=g.discord,N=f.filter((function(e){return a.startsWith("#")?e.tags.find((function(e){return("#"+e).startsWith(a)})):e.title.toLowerCase().includes(a.toLowerCase())})).map((function(e,t){return r.a.createElement(y,Object.assign({key:t},e,{pinnedPosts:p,user:g}))}));return r.a.createElement("div",{className:"home-container"},r.a.createElement("button",{className:"logout-btn",onClick:function(){u({type:"LOGOUT"})}},"Logout"),r.a.createElement("div",{className:"header"},r.a.createElement(I,{githubId:h,username:v,avatarUrl:E,fullname:O,discord:j}),r.a.createElement(S,{setFilter:c})),r.a.createElement("div",{className:"masonry-container"},r.a.createElement(L.a,{className:"my-masonry-grid posts",columnClassName:"my-masonry-grid_column",breakpointCols:b},N)),r.a.createElement(Y,null),r.a.createElement(G,null))}a(347);function V(){var e=Object(n.useContext)(K),t=e.state,a=e.dispatch,c=Object(n.useState)({errorMessage:"",isLoading:!1}),o=Object(s.a)(c,2),l=o[0],u=o[1],p=t.client_id,b=t.redirect_uri;return Object(n.useEffect)((function(){var e=window.location.href;if(e.includes("?code=")){var n=e.split("?code=");window.history.pushState({},null,n[0]),u(Object(A.a)(Object(A.a)({},l),{},{isLoading:!0}));var r={client_id:t.client_id,redirect_uri:t.redirect_uri,client_secret:t.client_secret,code:n[1]};console.log(r);var c=t.proxy_url;fetch(c,{method:"POST",body:JSON.stringify(r)}).then((function(e){return e.json()})).then(function(){var e=Object(d.a)(m.a.mark((function e(t){var n,r,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:"LOGIN",payload:{user:t,isLoggedIn:!0}}),console.log("before"),e.prev=2,e.next=5,B(t,c);case 5:n=e.sent,r=n.dbUser,o=n.posts,console.log("here"),a({type:"POSTS",payload:{posts:o,dbUser:r}}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){u({isLoading:!1,errorMessage:"Sorry! Login failed"})}))}}),[]),t.isLoggedIn?r.a.createElement(i.a,{to:"/"}):r.a.createElement("div",{className:"login"},r.a.createElement("div",{className:"login-container"},l.isLoading?r.a.createElement("div",{className:"loader"}):r.a.createElement("div",{className:"login-btn-container"},r.a.createElement("a",{className:"login-btn",href:"https://github.com/login/oauth/authorize?scope=user&client_id=".concat(p,"&redirect_uri=").concat(b),onClick:function(){u(Object(A.a)(Object(A.a)({},l),{},{errorMessage:""}))}},"Login with Github"),r.a.createElement("span",{className:"login-btn-error"},l.errorMessage))),r.a.createElement("div",{className:"login-header"},r.a.createElement("h1",{className:"login-header_name"},"fellowboard"),r.a.createElement("p",{className:"login-header_tagline"},"Navigate resources curated by fellows for fellows")))}var K=Object(n.createContext)();var $=function(){var e=Object(n.useReducer)(W,q),t=Object(s.a)(e,2),a=t[0],c=t[1];return r.a.createElement(K.Provider,{value:{state:a,dispatch:c}},r.a.createElement(l.a,null,r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"/login",component:V}),r.a.createElement(i.b,{path:"/",component:z}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement($,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[210,1,2]]]);
//# sourceMappingURL=main.429da9d6.chunk.js.map