(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{19:function(e,t,a){e.exports=a.p+"static/media/pin-outline.7c3df105.svg"},20:function(e,t,a){e.exports=a.p+"static/media/pin-filled.8ce1b2c1.svg"},21:function(e,t,a){e.exports=a.p+"static/media/search.8d146a4a.svg"},22:function(e,t,a){e.exports=a.p+"static/media/save.2f36ebaa.svg"},23:function(e,t,a){e.exports=a.p+"static/media/edit.b5e1292a.svg"},24:function(e,t,a){e.exports=a.p+"static/media/cancel.2040f220.svg"},27:function(e,t,a){e.exports=a(41)},33:function(e,t,a){},39:function(e,t,a){e.exports=a.p+"static/media/illustration.96e41f0b.svg"},40:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(18),s=a.n(c),o=a(3),i=a(12),l=a(1),u=a(8),m=a.n(u),d=a(10),p=["0F2E4C","39B995","F7B929","1C529E","263546","FED330","DB3A34","14B5B0"],g={default:3,1100:2,750:1},f=function(e){for(var t=0,a=0;a<e.length;a++)t+=e.charCodeAt(a)+a;return"#"+p[t=((t%=p.length)+p.length)%p.length]},b=a(19),h=a.n(b),v=a(20),E=a.n(v);var y=function(e){var t,a=Object(n.useState)(!1),c=Object(o.a)(a,2),s=c[0],i=c[1],l=Object(n.useState)(s),u=Object(o.a)(l,2),m=u[0],d=u[1];switch(e.type.toLowerCase()){case"discord":case"text":t=r.a.createElement("div",{className:"post-body_content text"},"link"in e.content&&r.a.createElement(r.a.Fragment,null,"\ud83d\udd17",r.a.createElement("a",{href:e.content.url,target:"_blank"},"Resource")),r.a.createElement("p",null,e.content.description));break;case"youtube":t=r.a.createElement("div",{className:"post-body_content youtube"},r.a.createElement("a",{href:"https://www.youtube.com/watch?v=".concat(e.content.id),target:"_blank"},"\ud83d\udd17 Video link"),r.a.createElement("img",{className:"post-body_thumbnail",src:e.content.thumbnails.url}))}var p,g=e.tags.map((function(e,t){return r.a.createElement("span",{key:t,className:"tag",style:{backgroundColor:f(e)}},"#".concat(e))})),b=function(e){var t=e;e instanceof Date||(t=new Date(e));var a=new Date,n=t.getTime()-a.getTime();return Math.floor(Math.abs(n)/864e5)}(e.timestamp);return p=0===b?"today":1===b?"yesterday":b+" days ago",r.a.createElement("div",{className:"post",onMouseOver:function(){return d(!0)},onMouseLeave:function(){return d(!1)}},(m||s)&&r.a.createElement("img",{onClick:function(){return i(!s)},className:"post-pin",src:s?E.a:h.a}),r.a.createElement("section",{className:"post-body"},r.a.createElement("div",{className:"post-body_header"},r.a.createElement("h3",{className:"title"},e.title),r.a.createElement("label",{className:"creator"},"Shared by ",e.creator),r.a.createElement("label",{className:"time"},"Posted ",p)),t),r.a.createElement("section",{className:"post-tags"},g))},O=a(21),N=a.n(O);var j=function(e){var t=Object(n.useState)(""),a=Object(o.a)(t,2),c=a[0],s=a[1],i=Object(n.useState)([]),l=Object(o.a)(i,2),u=l[0],m=(l[1],u.map((function(e,t){var a=e.substring(1);return r.a.createElement("span",{key:t,className:"tag",style:{backgroundColor:f(a)}},e)})));return r.a.createElement("div",{className:"search"},m,r.a.createElement("input",{value:c,placeholder:"Search by title or by tags by prepending #...",onChange:function(e){s(e.target.value)},onKeyUp:function(){return e.setFilter(c)}}),r.a.createElement("img",{src:N.a,className:"search-btn",onClick:function(){return e.setFilter(c)}}))},w=a(22),S=a.n(w),_=a(23),k=a.n(_),x=a(24),L=a.n(x);var C=function(e){var t=Object(n.useState)(e.discord||""),a=Object(o.a)(t,2),c=a[0],s=a[1],i=Object(n.useState)(!1),l=Object(o.a)(i,2),u=l[0],m=l[1],d=r.a.createElement("span",{className:"profile-discord"},u?r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{value:c,onChange:function(e){return s(e.target.value)},placeholder:"Set discord username",className:"profile-discord_input"}),r.a.createElement("img",{src:S.a,onClick:function(){alert("saved discord username"),m(!1)}}),r.a.createElement("img",{src:L.a,onClick:function(){return m(!1)}})):r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{value:c,className:"profile-discord_input"},e.discord||"Set discord username"),r.a.createElement("img",{src:k.a,onClick:function(){return m(!0)}})));return r.a.createElement("div",{className:"profile"},r.a.createElement("div",{className:"profile-avatar"}),r.a.createElement("section",null,r.a.createElement("h2",{className:"profile-name"},e.fullname||e.username),d))},I=(a(33),a(25)),U=a.n(I),F=a(7),M=function(){var e=Object(d.a)(m.a.mark((function e(t,a){var n,r,c,s,o,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=11;break}return n=t.avatar_url,r=t.login,c=t.id,s="?ghUsername=".concat(r,"&githubId=").concat(c,"&avatarUrl=").concat(n),e.next=6,fetch("".concat(a,"/user-posts").concat(s));case 6:return o=e.sent,e.next=9,o.json();case 9:return i=e.sent,e.abrupt("return",i);case 11:return e.abrupt("return",[]);case 14:return e.prev=14,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",[]);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,a){return e.apply(this,arguments)}}(),T={isLoggedIn:JSON.parse(localStorage.getItem("isLoggedIn"))||!1,user:JSON.parse(localStorage.getItem("user"))||null,client_id:"57cc7255392bb873af7c",redirect_uri:"https://fellowboard.herokuapp.com/login",client_secret:"33bf80ee246f154d2aba9211398a35e0e2e27c95",proxy_url:"https://fellowboard.herokuapp.com/authenticate",dbUser:{},posts:[]},B=function(e,t){switch(t.type){case"LOGIN":return localStorage.setItem("isLoggedIn",JSON.stringify(t.payload.isLoggedIn)),localStorage.setItem("user",JSON.stringify(t.payload.user)),Object(F.a)(Object(F.a)({},e),{},{isLoggedIn:t.payload.isLoggedIn,user:t.payload.user});case"LOGOUT":return localStorage.clear(),Object(F.a)(Object(F.a)({},e),{},{isLoggedIn:!1,user:null});case"POSTS":return Object(F.a)(Object(F.a)({},e),{},{posts:t.payload.posts,dbUser:t.payload.dbUser});default:return e}};function J(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],c=t[1],s=Object(n.useContext)(D),i=s.state,u=s.dispatch;if(Object(n.useEffect)((function(){function e(){return(e=Object(d.a)(m.a.mark((function e(){var t,a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(i.user,i.proxy_url);case 2:t=e.sent,a=t.dbUser,n=t.posts,u({type:"POSTS",payload:{posts:n,dbUser:a}});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),!i.isLoggedIn)return r.a.createElement(l.a,{to:"/login"});var p=i.posts,f=i.user,b=f.login,h=f.id,v=f.avatar_url,E=f.name,O=p.filter((function(e){return a.startsWith("#")?e.tags.find((function(e){return("#"+e).startsWith(a)})):e.title.toLowerCase().includes(a.toLowerCase())})).map((function(e){return r.a.createElement(y,e)}));return r.a.createElement("div",{className:"home-container"},r.a.createElement("button",{className:"logout-btn",onClick:function(){u({type:"LOGOUT"})}},"Logout"),r.a.createElement("div",{className:"header"},r.a.createElement(C,{githubId:h,username:b,avatarUrl:v,fullname:E}),r.a.createElement(j,{setFilter:c})),r.a.createElement(U.a,{className:"my-masonry-grid posts",columnClassName:"my-masonry-grid_column",breakpointCols:g},O))}a(39),a(40);function P(){var e=Object(n.useContext)(D),t=e.state,a=e.dispatch,c=Object(n.useState)({errorMessage:"",isLoading:!1}),s=Object(o.a)(c,2),i=s[0],u=s[1],p=t.client_id,g=t.redirect_uri;return Object(n.useEffect)((function(){var e=window.location.href;if(e.includes("?code=")){var n=e.split("?code=");window.history.pushState({},null,n[0]),u(Object(F.a)(Object(F.a)({},i),{},{isLoading:!0}));var r={client_id:t.client_id,redirect_uri:t.redirect_uri,client_secret:t.client_secret,code:n[1]},c=t.proxy_url;fetch(c,{method:"POST",body:JSON.stringify(r)}).then((function(e){return e.json()})).then(function(){var e=Object(d.a)(m.a.mark((function e(t){var n,r,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:"LOGIN",payload:{user:t,isLoggedIn:!0}}),e.prev=1,e.next=4,M(t,c);case 4:n=e.sent,r=n.dbUser,s=n.posts,a({type:"POSTS",payload:{posts:s,dbUser:r}}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){u({isLoading:!1,errorMessage:"Sorry! Login failed"})}))}}),[t,a,i]),t.isLoggedIn?r.a.createElement(l.a,{to:"/"}):r.a.createElement("div",{className:"login"},r.a.createElement("div",{className:"login-container"},i.isLoading?r.a.createElement("div",{className:"loader"}):r.a.createElement("div",{className:"login-btn-container"},r.a.createElement("a",{className:"login-btn",href:"https://github.com/login/oauth/authorize?scope=user&client_id=".concat(p,"&redirect_uri=").concat(g),onClick:function(){u(Object(F.a)(Object(F.a)({},i),{},{errorMessage:""}))}},"Login with Github"),r.a.createElement("span",{className:"login-btn-error"},i.errorMessage))),r.a.createElement("div",{className:"login-header"},r.a.createElement("h1",{className:"login-header_name"},"fellowboard"),r.a.createElement("p",{className:"login-header_tagline"},"Navigate resources curated by fellows for fellows")))}var D=Object(n.createContext)();var G=function(){var e=Object(n.useReducer)(B,T),t=Object(o.a)(e,2),a=t[0],c=t[1];return r.a.createElement(D.Provider,{value:{state:a,dispatch:c}},r.a.createElement(i.a,null,r.a.createElement(l.d,null,r.a.createElement(l.b,{path:"/login",component:P}),r.a.createElement(l.b,{path:"/",component:J}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(G,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[27,1,2]]]);
//# sourceMappingURL=main.1cf20ad9.chunk.js.map